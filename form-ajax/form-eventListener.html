<!DOCTYPE html>
<html>
<head>
  <title>Page form eventListener</title>
  <!--<script src="js/jquery-3.5.1.min.js"></script>-->

<!-- .addEventListener()
  Учим приложение реагировать на действия пользователя.
  https://doka.guide/js/element-addeventlistener

  submit
  Пользователь отправляет форму, а мы реагируем.
  https://doka.guide/js/event-submit
-->

</head>
<body>

<h4>Simply 'focus', 'blur' and 'input' events</h4>

<form id="my">
  <label for="usr">User:</label>
  <input type="text" id="usr" name="usName"/><br/>

  <label for="psw">Pass:</label>
  <input type="password" id="psw" name="usPass"/><br/>

  <!-- type="button", не сабмитит форму -->
  <input type="submit" onclick="runTest()" name="usTest" value="Run/Stop test"/><br/>
</form>
<p>Element: <span id="target1"></span></p>
<p>Test value: <span id="target2"></span></p>


<script type="text/javascript">
  // блок переменных и функций runTest для запуска кнопкой
  var exec = false;
  var interval = 2000; // 2 секунды
  var nn = 0;

  function runTest()
  {
    if(!exec) {
      exec = true;
      console.log('run-Test');
      updates = setInterval(change, interval);
    }
    else {
      exec = false;
      console.log('stop-Test');
      clearInterval(updates);
    }
  }

  function change()
  {
    nn += 1;
    document.getElementById('target2').innerHTML = nn;
    //console.log('date: ' + Date());
  }


  // EventListener
  let myForm = document.getElementById('my');
  myForm.addEventListener("submit", (event) => {
    console.log('form-submit');

    //preventDefault отменяет поведение браузера по умолчанию, которое происходит при обработке события
    //Поведение по умолчанию формы — это отправка запроса на сервер и перезагрузка страницы
    event.preventDefault(); //часть submit'a, вызванного нажатием кнопки type="submit", будет отменена (см. выше)

    let user = document.querySelector('#usr').value;
    let pass = document.querySelector('#psw').value;
    if(user == "" || pass == "") {
      console.log("Warning! Username or password is null");
    }
    else {
      console.log(`Success! Username is "${user}", password is "${pass}"`);
    }
  });

</script>

</body>
</html>
